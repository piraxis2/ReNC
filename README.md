# ReNCProject<br> 
프로젝트명 <br> 
오토크롤러<br> 

개요
19년도 유행했던 게임 장르 오토체스의 모작입니다.<br> 
●  도타2 오토체스의 전투시스템을 A*알고리즘과 독자적인 전투 루틴을 유니티로 구현하여 모사 <br> 
●  모든 기물, 이펙트를 오브젝트 풀링으로 관리해서 리소스의 낭비를 줄임<br> 
●  아이템과 특성 등의 정보를 데이터 테이블로 관리하여 보수 및 언어 스왑을 쉽게 할 수 있도록 제작<br> 
●  오토체스의 멀리건 시스템과 기물의 합체 및 소멸을 구현<br> 
●  팀파이트택틱스의 아이템 조합 시스템을 구현<br> 
● 기타 다른 모든 시스템 직접 구현<br> 
개발 언어<br> 
C#<br> 
개발 엔진<br> 
Unity<br> 


시스템 개요<br> 
1) A* 알고리즘과 전투루틴<br> 

● 길찾기 루틴은 다음과 같습니다.<br> 
➔ 검사할 노드와 완료한 노드의 목록을 준비한다.<br> 
➔ 시작노드의 Gcost (현재 노드에서 시작노드 까지 소비된 비용)와 Hcost(현재노드에서 목표 노드까지 소비될 비용)을 구한다.<br> 
➔ 시작 노드를 현재 노드로 설정한다.<br> 
➔ 현재노드의 이웃노드(면이 붙어있는 최대 4개의 노드)를 얻어와서 순회하며 각 노드가 검사할 노드에 담겨져 있지 않거나 이웃 노드의 Gcost를 새로 계산한 결과 기존에 담겨져있는 Gcost보다 작은 경우 검사할 노드에 넣고 이웃노드의 Hcost와 Gcost를 계산한다.<br> 
➔ 현재노드에 대한 이웃노드의 계산을 끝냈으니 현재노드를 완료한 노드의 목록에 저장한다.<br> 
➔ 현재 노드가 검사할 노드에 담겨있는 노드인지 검사한 후 담겨져 있다면 계산이 끝난 노드니 검사할 노드에서 삭제한다.<br> 
➔ 검사할 노드 리스트에서 목적지 까지 가장 적은 비용이 드는 노드를 얻어와서 현재노드로 설정한다.<br> 
➔ 현재 노드가 목표인지 검사하고 목표이면 루틴을 종료한다.<br> 

● 모든 전투 루틴은 캐릭터 액션 매니져 클래스에의해 관리되며  전투 루틴은 다음과 같습니다.<br> 
➔ 적 기물이 존재한다면 적 기물이 사거리에 닿을 때 까지 이동한다.<br> 
➔ 사거리안에 적 기물이 있다면 공격한다. 적 기물이 여럿 존재한다면 기물의 우선도 순으로 공격한다. ( 공격은 비동기로 진행됨)<br> 
➔ 타격 혹은 피격시 마나가 상승하며 max 마나에 도달하면 스킬을 사용한다.<br> 
➔ 스킬의 범위및 발동 방식은 각 스킬 클래스에서 작동한다.<br> 
➔ 모든 적 기물이 사망하면 스테이지가 끝날 때까지 기다린다.<br> 
➔ 스테이지가 끝날 때 까지 양측 기물이 살아있다면 무승부로 하고 스테이지를 끝낸다.<br> 

2) 모든 기물 및 이펙트의 오브젝트 풀링<br> 

● 오브젝트 풀링<br> 
➔ 미리 만들어 놓은 오브젝트에 넘버링을 해둔다.<br> 
➔ 오브젝트가 필요할때 매니저에 의해 관리되고 있는 이미 만들어져 있는 오브젝트를 꺼내쓴다.<br> 
➔ 이미 만들어져 있는 오브젝트가 전부 사용중이라면 오브젝트를 복제하여 새로 만들고 초과된 넘버링을 부여한다<br> 
➔ 오브젝트의 사용이 끝났고 초과된 넘버링을 가지고 있다면 해당 오브젝트를 삭제한다. 기존 넘버링을 가지고 있던 오브젝트라면 삭제하지 않고 엑티브만 해제한다.<br> 

3) 융합과 손패 시스템<br> 

● 융합<br> 
➔ 같은lv의 같은 종류의 기물이 3개가 되면 마지막으로 손패에 들어온 기물을 선택하여 융합의 부모로 정하고 선택된 기물을 제외한 다른 융합의 기물들이 게임에서 제외되게 한다. (삭제하는 것이 아님 게임과 융합 룰에서 제외)<br> 
➔ 부모 기물에 융합된 자식 기물들은 부모에게 링크드 리스트로 연결된다.<br> 
➔ 융합된 부모 기물을 팔았을 때 모든 자식기물의 연결을 해제하고 자식기물은 제외에서 돌아온다.<br> 

● 손패의 셔플은 손패를 관리하는 클래스 내부에 있는 유저 레벨에 따르는 확률표에 의해 결정됩니다.<br> 
4) 데이터 테이블<br> 

● csv 파일로 이루어진 문자열에서 필요한 정보를 파싱하여 사용합니다. 국가를 변경하면 다른 국가의 언어로 간단히 변경할 수 있습니다.<br> 

5) 팀 파이트 택틱스(TFT)의 아이템 조합 시스템<br> 

● Common 등급의 아이템은 동시에  두개 장비할 수 없습니다. Common장비 두 개를 캐릭터가 장비하면 두 장비는 합쳐져 Rare등급의 아이템이 됩니다.<br> 
➔ 융합될 때 각 기물이 가진 아이템을 surplus(잉여) 리스트에 담아놓고 Rare 아이템을 우선으로 융합기물에 넣고 surplus의 아이템이 0이 되거나 융합기물에 더이상 아이템이 들어가지 않을 때 까지 아이템을 넣고 조합시키는 함수를 반복시킨다.<br> 




핵심 스크립트<br> 
A* <br> 
➔ PathFind<br> 
➔ Node<br> 
➔ NodeComparer<br> 
➔ PassengerComparer<br> 

Objectpooling<br> 
➔ FxMng<br> 
➔ MobPooling<br> 

DataTable<br> 
➔ TableMng<br> 
➔ ReadData<br> 

Hand and Fusion<br> 
➔ MulliganMng<br> 
➔ HandMng<br> 

Action<br> 
➔ CharActionMng<br> 
➔ ActionContainer<br> 

Article<br> 
➔ BaseChar<br> 
➔ Status<br> 
모든 코드는 GitHub에서 확인하실 수 있습니다.<br> 
GitHub : https://github.com/piraxis2/ReNC<br> 
Video : https://www.youtube.com/watch?v=k0v8rNXGpNE&feature=youtu.be<br> 
